## åŸºç¡€å®šä¹‰

```rust
// æ•°æ®ç»“æ„
pub struct NewsArticle {
  pub headline: String,
  pub location: String,
  pub author: String,
  pub content: String,
}

// å®šä¹‰è¡Œä¸º
pub trait Summary {
  fn summarize(&self) -> String;
}

// å®ç°è¡Œä¸º
impl Summary for NewsArticle {
  fn summarize(&self) -> String {
    format!("{}, by {} ({})", self.headline, self.author, self.location)
  }
}

// ç»“æ„2
pub struct Tweet {
  pub username: String,
  pub content: String,
  pub reply: bool,
  pub retweet: bool,
}

// å®ç°è¡Œä¸º
impl Summary for Tweet {
  fn summarize(&self) -> String {
    format!("{}: {}", self.username, self.content)
  }
}

fn main() {
  let tweet = Tweet {
    username: String::from("horse_ebooks"),
    content: String::from("of course, as you probably already know, people"),
    reply: false,
    retweet: false,
  };

  // ä½¿ç”¨Traitè¡Œä¸º
  println!("1 new tweet: {}", tweet.summarize());

  let article = NewsArticle {
    headline: String::from("Penguins win the Stanley Cup Championship!"),
    location: String::from("Pittsburgh, PA, USA"),
    author: String::from("Iceburgh"),
    content: String::from(
      "The Pittsburgh Penguins once again are the best \
      hockey team in the NHL.",
    ),
  };

  // ä½¿ç”¨Traitè¡Œä¸º
  println!("New article available! {}", article.summarize());
}
```

## å®šä¹‰ Trait é»˜è®¤å®ç°

```rust
pub trait Summary {
  fn summarize(&self) -> String {
    String::from("(Read more...)")
  }
}

// ä½¿ç”¨é»˜è®¤Traitå®ç°ï¼Œå¦‚æœéœ€è¦è¦†ç›–ï¼Œåˆ™æ­£å¸¸å®šä¹‰å³å¯
impl Summary for NewsArticle {}
```

**Tips:æ— æ³•åœ¨é‡è½½æ–¹æ³•å®ç°çš„è¿‡ç¨‹ä¸­è°ƒç”¨è¯¥æ–¹æ³•çš„é»˜è®¤å®ç°**

## å­¤å„¿åŸåˆ™

å®šä¹‰ï¼šä¸ºæŸä¸ªç±»å‹å®ç°æŸä¸ª Trait æ—¶ï¼Œç±»å‹æˆ– Trait å¿…é¡»æœ‰è‡³å°‘ä¸€ä¸ªåœ¨å½“å‰ä½œç”¨åŸŸä¸­å®šä¹‰ï¼Œå¦‚æœéƒ½ä¸åœ¨å½“å‰ä½œç”¨åŸŸä¸­å®šä¹‰ï¼Œåˆ™æ— æ³•å®ç°ï¼Œç¼–è¯‘å™¨ä¼šæ‹’ç»è¿™æ ·çš„ä»£ç ã€‚

åŸå› ï¼š

```rust
// åº“ A ä¸­ï¼š
impl Display for Vec<i32> {
    fn fmt(&self, f: &mut Formatter) -> Result {
        write!(f, "æ•°ç»„: {:?}", self)
    }
}

// åº“ B ä¸­ï¼š
impl Display for Vec<i32> {
    fn fmt(&self, f: &mut Formatter) -> Result {
        write!(f, "å‘é‡: {:?}", self)
    }
}

// ä½ çš„ç¨‹åºåŒæ—¶ä½¿ç”¨åº“ A å’Œåº“ Bï¼š
use library_a::*;
use library_b::*;

fn main() {
    let vec = vec![1, 2, 3];
    println!("{}", vec);  // ğŸ¤” åº”è¯¥æ‰“å°"æ•°ç»„"è¿˜æ˜¯"å‘é‡"ï¼Ÿ
}
```

_Tips:ä¸ºä»€ä¹ˆå«åšå­¤å„¿åŸåˆ™ï¼Œå°±æ˜¯è¯´ä¸èƒ½æ’®åˆä¸¤ä¸ªä¸å½“å‰ä½œç”¨äºæ— å…³çš„ç±»å‹ä¸ Trait åœ¨ä¸€èµ·ï¼Œä»–ä»¬å¯¹äºå½“å‰ä½œç”¨åŸŸæ¥è¯´éƒ½æ˜¯å­¤å„¿_

## ä½¿ç”¨ Trait ä½œä¸ºå‚æ•°

å‚æ•°ç±»å‹ä¸ºï¼šä»»æ„å®ç°äº† Summary Trait çš„ç±»å‹

```rust
pub fn notify(item: impl Summary) {
  println!("Breaking news! {}", item.summarize());
}
// è¿™é‡Œçš„impl Traitå¸¸è¢«ç”¨åœ¨ä¸€äº›è¾ƒçŸ­çš„ç¤ºä¾‹ä¸­ï¼Œä½†å®ƒå…¶å®åªæ˜¯traitçº¦æŸ ï¼ˆtrait boundï¼‰çš„ä¸€ç§è¯­æ³•ç³–ã€‚å®ƒçš„å®Œæ•´å½¢å¼å¦‚ä¸‹æ‰€ç¤º
pub fn notify<T: Summary>(item: T) {
  println!("Breaking news! {}", item.summarize());
}
```

ä½•æ—¶æ˜¯æœ‰è¯­æ³•ç³–ï¼Œä½•æ—¶ä½¿ç”¨ Trait å®Œæ•´çº¦æŸè¯­æ³•å‘¢ï¼Ÿ

```rust
// å½“éœ€è¦åŒæ—¶ä¼ å…¥å¤šä¸ªå‚æ•°æ—¶ï¼Œä½¿ç”¨impl Traitè¯­æ³•ç³–ï¼Œä¸¤ä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ï¼Œåªè¦æ˜¯å®ç°äº†Summary Trait å³å¯
pub fn notify(item1: impl Summary, item2: impl Summary) {}

// å½“éœ€è¦é™åˆ¶å‚æ•°ç±»å‹ä¸ºåŒä¸€ç±»å‹æ—¶ï¼Œä½¿ç”¨Traitå®Œæ•´çº¦æŸè¯­æ³•
pub fn notify<T: Summary>(item1: T, item2: T) {}
```

### ä½¿ç”¨ + å·æ‹¼æ¥å¤šä¸ª Trait çº¦æŸ

```rust
// å½“éœ€è¦å‚æ•°é™åˆ¶ä¸ºå¤šä¸ªTraitæ—¶ï¼Œä½¿ç”¨ + å·æ‹¼æ¥å¤šä¸ªTraitå³å¯
pub fn notify(item1: impl Summary + Summary) {}

// å½“éœ€è¦é™åˆ¶å‚æ•°ç±»å‹ä¸ºåŒä¸€ç±»å‹ï¼Œå¹¶ä¸”éœ€è¦å¤šä¸ªçº¦æŸæ—¶ï¼Œä½¿ç”¨Traitå®Œæ•´çº¦æŸè¯­æ³•
pub fn notify<T: Summary + Display>(item1: T, item2: T) {}
```

### ä½¿ç”¨ where å…³é”®å­—ç®€åŒ– Trait çº¦æŸ

```rust
// æ³›å‹Traitçº¦æŸè¾ƒä¸ºå¤æ‚ï¼Œå¯ä»¥ä½¿ç”¨Whereä»å¥ç®€åŒ–
fn some_function<T: Display + Clone, U: Clone + Debug>(t: T, u: U) -> i32 {}

// ä½¿ç”¨whereä»å¥
fn som_function<T, U>(t: T, u: U) -> i32
where
  T: Display + Clone,
  U: Clone + Debug
{
  // å‡½æ•°ä½“
}
```

## ä½¿ç”¨ Trait ä½œä¸ºè¿”å›å€¼

æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨è¿”å›å€¼ä¸­ä½¿ç”¨ impl Trait è¯­æ³•ï¼Œç”¨äºè¿”å›æŸç§å®ç°äº† trait çš„ç±»å‹ï¼š

```rust
fn returns_summarizable() -> impl Summary {
  Tweet {
    username: String::from("horse_ebooks"),
    content: String::from("of course, as you probably already know, people"),
    reply: false,
    retweet: false,
  }
}
```

**é‡ç‚¹ï¼šåœ¨å¤šåˆ†æ”¯è¿”å›è¯­å¥ä¸­ï¼Œä½ åªèƒ½åœ¨è¿”å›åŒä¸€ä¸ªç±»å‹ï¼Œä½¿ç”¨ impl Traitï¼Œå¦‚æœè¿”å›çš„ç±»å‹ä¸åŒï¼ˆå“ªæ€•ä»–ä»¬éƒ½å®ç°äº†ç›¸åŒçš„ traitï¼‰ï¼Œç¼–è¯‘å™¨å°†ä¼šæŠ¥é”™ã€‚è¿™ç§éœ€æ±‚éœ€è¦ä½¿ç”¨ trait å¯¹è±¡æ¥å®Œæˆ**

## ç»¼åˆæ¡ˆä¾‹

```rust
// æ³›å‹çº¦æŸ
pub fn find_max<T>(arr: &[T]) -> T
// Whereä»å¥
where
    T: PartialOrd + Copy, // å¤šä¸ªçº¦æŸ
{
    let mut max = arr[0];
    // &i ä¸ºæ¨¡å¼åŒ¹é…ï¼Œi ä¸ºè§£æ„èµ‹å€¼
    for &i in arr.iter() {
        if i > max {
            max = i;
        }
    }

    max
}
```

## ä½¿ç”¨ trait çº¦æŸæ¥æœ‰æ¡ä»¶åœ°å®ç°æ–¹æ³•

```rust
use std::fmt::Display;

struct Pair<T> {
    x: T,
    y: T,
}

// å®ç°æ³›å‹æ–¹æ³•
impl<T> Pair<T> {
    fn new(x: T, y: T) -> Self {
        Self { x, y }
    }
}

// å®ç°æœ‰æ¡ä»¶çš„æ–¹æ³•ï¼Œåªæœ‰å½“ T æ»¡è¶³ Display å’Œ PartialOrd çº¦æŸæ—¶ï¼Œæ‰èƒ½è°ƒç”¨ cmp_display æ–¹æ³•
impl<T: Display + PartialOrd> Pair<T> {
    fn cmp_display(&self) {
        if self.x >= self.y {
            println!("The largest member is x = {}", self.x);
        } else {
            println!("The largest member is y = {}", self.y);
        }
    }
}
```
