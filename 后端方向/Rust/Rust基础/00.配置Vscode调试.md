<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

**Table of Contents** _generated with [DocToc](https://github.com/thlorenz/doctoc)_

- [安装插件](#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6)
- [配置](#%E9%85%8D%E7%BD%AE)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 安装插件

- CodeLLDB：调试器
- Rust Analyzer：代码分析
- Rust：Rust 语言支持

## 配置

- 在项目根目录下创建`.vscode/launch.json`文件
- 在`launch.json`文件中添加以下内容

```json
{
  // 使用 IntelliSense 了解相关属性。
  // 悬停以查看现有属性的描述。
  // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Run Debug",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/target/debug/${workspaceFolderBasename}",
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "cargo build"
    }
  ]
}
```

在`.vscode` 目录下创建 `tasks.json`文件中添加以下内容

```json
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "cargo build",
      "type": "shell",
      "command": "cargo",
      "args": ["build"],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "problemMatcher": ["$rustc"]
    }
  ]
}
```

选择一下调试界面的调试目标任务（如果有多个的话），然后按下 F5 即可开始调试。

## 运行 Test 时，printf 不生效

默认情况下，测试程序为了保证输出每个，会拦截测试程序的输出，所以我们在测试程序中使用 `println!` 是不会有任何输出的。

如果希望通过日志来查看测试程序的运行情况，可以使用 `--nocapture` 参数来运行测试程序：

```bash
cargo test -- --nocapture
```

也可以为 rust-analyzer 添加配置，这样在我点击 `Run Test` 时，会自动添加 `--nocapture` 参数：

```json
{
  "rust-analyzer.runnables.extraTestBinaryArgs": [
    "--show-output",
    "--nocapture"
  ]
}
```

在设置中搜索 extraTestBinaryArgs 也能通过 GUI 添加配置
