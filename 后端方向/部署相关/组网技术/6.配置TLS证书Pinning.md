## Generate Certificate Hash

```bash
echo | openssl s_client -servername example.com -connect example.com:443 2>/dev/null | openssl x509 -pubkey -noout | openssl pkey -pubin -outform der | openssl dgst -sha256 -binary | openssl enc -base64
```

## Naive Certificate Pinning

```json
{
  "__id_in_gui": "ID_x9lr9b4e",
  "tag": "US",
  "type": "http",
  "server": "example.com",
  "server_port": 443,
  "tls": {
    "enabled": true,
    "server_name": "example.com",
    "certificate_public_key_sha256": [
      "rjmPQ8gJB5QTEzi5a9nz2mI8th2qet+rOnOeTuQcRfM="
    ]
  },
  "username": "username",
  "password": "password"
}
```

## Server Config

keep the server using a stable key to apply for certificates in caddy config:

```caddyfile
# in tls config
tls 1111111111@qq.com {
    key_type ed25519
    # important:use the same key as client
    reuse_private_keys
}
```
