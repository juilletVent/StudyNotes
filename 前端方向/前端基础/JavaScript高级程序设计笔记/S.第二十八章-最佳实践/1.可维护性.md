## 可维护的特点

- 容易理解：无须求助原始开发者，任何人一看代码就知道它是干什么的，以及它是怎么实现的。
- 符合常识：代码中的一切都显得顺理成章，无论操作有多么复杂。
- 容易适配：即使数据发生变化也不用完全重写。
- 容易扩展：代码架构经过认真设计，支持未来扩展核心功能。
- 容易调试：出问题时，代码可以给出明确的信息，通过它能直接定位问题。

## 可读性

### 注释

一般来说，以下这些地方应该写注释：

- 函数和方法：每个函数和方法都应该有注释来描述其用途，以及完成任务所用的算法。同时，
  也写清使用这个函数或方法的前提（假设）、每个参数的含义，以及函数是否返回值（因为通过
  函数定义看不出来）。
- 大型代码块：多行代码但用于完成单一任务的，应该在前面给出注释，把要完成的任务写清楚。
- 复杂的算法：如果使用了独特的方法解决问题，要通过注释解释明白。这样不仅可以帮助别人查看代码，也可以帮助自己今后查看代码。
- 使用黑科技：由于浏览器之间的差异， JavaScript 代码中通常包含一些黑科技。不要假设其他人一看就能明白某个黑科技是为了解决某个浏览器的什么问题。如果某个浏览器不能使用正常方式达到目的，那要在注释里把黑科技的用途写出来。这样可以避免别人误以为黑科技没有用而把它“修复”掉，结果你已解决的问题又会出现。

### 变量/函数命名

见名知意，按照规范取名字即可

## 解耦

- 解耦 HTML 与 JS （All in js 思想下，只能自行按照 JS 解耦思路进行编码）
- 解耦 CSS 与 JS （All in js 思想下，只能自行按照 JS 解耦思路进行编码）
- 解耦 程序逻辑与事件处理

```js
// bad 业务逻辑与事件处理交织，无法进行针对业务的单元测试，也不好定位错误到底是事件触发还是业务自身有问题
function handleKeyPress(event) {
  if (event.keyCode == 13) {
    let target = event.target;
    let value = 5 * parseInt(target.value);
    if (value > 10) {
      document.getElementById("error-msg").style.display = "block";
    }
  }
}
// good 业务逻辑与事件处理拆分，不要写到一起
function validateValue(value) {
  value = 5 * parseInt(value);
  if (value > 10) {
    document.getElementById("error-msg").style.display = "block";
  }
}
function handleKeyPress(event) {
  if (event.keyCode == 13) {
    let target = event.target;
    validateValue(target.value);
  }
}
```

把应用程序逻辑从事件处理程序中分离出来有很多好处。首先，这可以让我们以最少的工作量轻松
地修改触发某些流程的事件。如果原来是通过鼠标单击触发流程，而现在又想增加键盘操作来触发，那
么修改起来也很简单。其次，可以在不用添加事件的情况下测试代码，这样创建单元测试或自动化应用
程序流都会更简单。几个点：

- 不要把 event 对象传给其他方法，而是只传递 event 对象中必要的数据。
- 应用程序中每个可能的操作都应该无须事件处理程序就可以执行。
- 事件处理程序应该处理事件，而把后续处理交给应用程序逻辑。

## 编码惯例

### 尊重对象所有权：

- 不要给实例或原型添加属性。
- 不要给实例或原型添加方法。
- 不要重定义已有的方法。
- 创建包含想要功能的新对象，通过它与别人的对象交互。
- 创建新自定义类型继承本来想要修改的类型，可以给自定义类型添加新功能。

### 不要声明多个全局变量，一个模块最多只声明一个全局变量作为命名空间；

### 严格的 if 检查

- 尽量使用严格相等判断
- 类型判断尽可能准确，而不是判空就完事儿了
- 如果值应该是引用类型，则使用 instanceof 操作符检查其构造函数。
- 如果值应该是原始类型，则使用 typeof 检查其类型。
- 如果希望值是有特定方法名的对象，则使用 typeof 操作符确保对象上存在给定名字的方法

## 常量

- 重复出现的值：任何使用超过一次的值都应该提取到常量中，这样可以消除一个值改了而另一个值没改造成的错误。这里也包括 CSS 的类名。
- 用户界面字符串：任何会显示给用户的字符串都应该提取出来，以方便实现国际化。
- URL： Web 应用程序中资源的地址经常会发生变化，因此建议把所有 URL 集中放在一个地方管理。
- 任何可能变化的值：任何时候，只要在代码中使用字面值，就问问自己这个值将来是否可能会变。如果答案是“是”，那么就应该把它提取到常量中。
