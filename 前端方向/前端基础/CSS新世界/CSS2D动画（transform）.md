<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

**Table of Contents** _generated with [DocToc](https://github.com/thlorenz/doctoc)_

- [可用性](#%E5%8F%AF%E7%94%A8%E6%80%A7)
- [顺序](#%E9%A1%BA%E5%BA%8F)
- [clip、clip-path 与 变换的联动](#clipclip-path-%E4%B8%8E-%E5%8F%98%E6%8D%A2%E7%9A%84%E8%81%94%E5%8A%A8)
- [层级](#%E5%B1%82%E7%BA%A7)
- [固定定位失效问题](#%E5%9B%BA%E5%AE%9A%E5%AE%9A%E4%BD%8D%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98)
- [裁剪](#%E8%A3%81%E5%89%AA)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 可用性

内联元素不支持 transform 变换（替换元素除外）

## 顺序

记住一点，所有的变换都是在操作元素的空间坐标轴，基于矩阵运算的法则，矩阵乘法不满足交换律，因此多个变换顺序有严格要求，交换顺序之后表现并不一样

## clip、clip-path 与 变换的联动

一句话：先裁剪，再变换

## 层级

transform 不为 none 的元素会创建新的 CSS 上下文，与 opacity 不为 1 的元素表现类似

## 固定定位失效问题

相对于屏幕固定的元素如果同时应用 transform 变换动画，则固定定位会失效

解决方案：嵌套元素，外层元素定位，内层元素实现动画

## 裁剪

- 设置了 transform 变换的的父级元素，会导致其内的绝对定位子元素响应上层的 overflow 裁剪行为
- **设置了 transform 变换的的父级元素现在也作为绝对定位的包含块**

## 变换的本质

变幻的本质是坐标的转换，底层实现是坐标与变换矩阵的运算，CSS 中对变换矩阵的定义如下：

```
CSS2D 变换矩阵函数：matrix(a, b, c, d, e, f)
[
  [ a c e ]
  [ b d f ]
  [ 0 0 1 ]
]
```

假设坐标值为(x,y)，则参与运算时将其转换为 3 微坐标(x,y,0),然后与矩阵做乘法运算得到变换后的坐标：

```
[
  ax + cy + e,
  bx + dy + f,
  0  +  0 + 1
]
```

可以看出，当 a,d 或 b,c 同时为零时，b,c 或 a,d 分别为 x,y 的一次系数，因此可以通过控制系数的方式实现缩放，e,f 为常数，在计算结果中直接累加到结果中，因此可以用于平移变换，同时使用 a,b,c,d 可以完成剪切、缩放、旋转、翻转等操作

## 变换原点（transform-origin）

指定变换的坐标系原点，对于旋转、缩放操作有显著效果；

假设我们把 transform-origin 设定为:`left top`，那么整个变换的坐标系原点就切换到了元素的左上方顶点位置，而不是默认的元素中心点，然后将整个坐标系逆时针旋转 45 度，就完成了变换；此时再去理解逆时针旋转 45 度的效果相比直接理解元素绕着左上角旋转 45 度就自然的多了。

**Tips：所有的变换都是对坐标系的变换而不是对目标元素的变换，从几何的角度去理解要自然的多**

## scalc 与 zoom 的区别

- 前者变换不改变元素布局，不影响周边的元素，后者则会
- zoom 变化因为涉及到 reflow，因此性能更差
- zoom 不会改变绝对定位的包含块，不回创建 CSS 层叠上下文；transform 则会

## 关于旋转时的坐标轴方向，与手性

CSS 体系中，三维坐标三轴排列使用左手定则确定，左手大拇指、食指、中指，互相垂直，得到的坐标系就是 CSS 的坐标系，拇指为 Z 轴，食指为 X 轴，中指为 Y 轴，整个坐标轴原定位于屏幕左上角，Z 轴正方向指向屏幕外的用户侧，X 轴正方向指向屏幕右侧，Y 轴正方向指向屏幕下方。

进行旋转变换时，三轴旋转的正向方都遵循左手螺旋定则的，使用左手定则确定旋转正方向（用左手握住旋转的坐标轴，拇指指向坐标轴正方向，其余手指指向的方向就是旋转正方向）
